colorscheme gruvbox

set global scrolloff 5,0

set global termcmd 'gnome-terminal -e '

add-highlighter global/ wrap -word -indent

def RemoveTrailingWhitespace %{
    execute-keys "\%s\h+$<ret>d;"
}

hook global WinSetOption filetype=go %{
    set window lintcmd "func() {
        ln -s $1 $1.go &&
        gometalinter $1.go 2>&1 |
        sed -E 's/vet: .*: (.*):([0-9]+):([0-9]+): (.*)/\1:\2:\3: error: \4/'
    } && func"
    lint-enable
    hook buffer BufWritePost .* lint
}

hook global NormalKey y|d|c %{ nop %sh{
  printf %s "$kak_main_reg_dquote" | xsel --input --clipboard
}}

map global user P -docstring 'pastes x clipoard contents before the selection' '! xsel --output --clipboard<ret>'
map global user p -docstring 'pastes x clipboard contents after the selection' '<a-!> xsel --output --clipboard<ret>'

map global normal <c-p> ':find '

map global user -docstring 'displays lsp-hover info' h ': lsp-hover<ret>'

def find -params 1 -shell-script-candidates %{ ag -l } %{ edit %arg{1} }

ranger-open-on-edit-directory

eval %sh{kak-lsp --kakoune -s $kak_session}

hook global BufCreate .* %{editorconfig-load}

source "%val{config}/plugins/plug.kak/rc/plug.kak"

plug "andreyorst/plug.kak"

plug "TeddyDD/kakoune-wiki"
wiki_setup "/home/matthew/Dropbox/vimwiki"

plug "TeddyDD/kakoune-edit-or-dir" config %{
    unalias global e edit
    alias global e edit-or-dir
}

def MakeJournalNote %{
    execute-keys %sh{
        echo ":wiki journal/$(date +"%Y-%m-%d").md<ret>"
    }
}
