colorscheme gruvbox

set global scrolloff 5,0

add-highlighter global/ wrap -word -indent

def RemoveTrailingWhitespace %{
    execute-keys '%s\h+$<ret>d;'
}

map global user / ':tmux-terminal-horizontal kak -c %val{session}<ret>’ -docstring ‘Split horizontal'

map global user = ':tmux-terminal-vertical kak -c %val{session}<ret>’ -docstring ‘Split vertical'

hook global WinSetOption filetype=go %{
    set window lintcmd "func() {
        ln -s $1 $1.go &&
        gometalinter $1.go 2>&1 |
        sed -E 's/vet: .*: (.*):([0-9]+):([0-9]+): (.*)/\1:\2:\3: error: \4/'
    } && func"
    lint-enable
    hook buffer BufWritePost .* lint
}

hook global NormalKey y|d|c %{ nop %sh{
  printf %s "$kak_main_reg_dquote" | xsel --input --clipboard
}}

map global user P '!xsel --output --clipboard<ret>'
map global user p '<a-!>xsel --output --clipboard<ret>'


hook global BufCreate [^*].*[^*] %{editorconfig-load}

source "%val{config}/plugins/plug.kak/rc/plug.kak"

plug "andreyorst/plug.kak" noload

plug "TeddyDD/kakoune-wiki"
wiki_setup "/home/matthew/Dropbox/vimwiki"

plug "TeddyDD/kakoune-edit-or-dir" config %{
    unalias global e edit
    alias global e edit-or-dir
}

def MakeJournalNote %{
    execute-keys %sh{
        echo ":wiki journal/$(date +"%Y-%m-%d").md<ret>"
    }
}

plug "ul/kak-lsp" do %{
    cargo install --locked --force --path .
} config %{
    map global user h ':lsp-hover<ret>'
    map global user d ':lsp-definition<ret>'
}

plug "andreyorst/fzf.kak" config %{
    map global user f ':fzf-mode<ret>'
    set-option global fzf_file_command 'rg'
}


#eval %sh{kak-lsp --kakoune -s $kak_session}

require-module x11
set global termcmd 'gnome-terminal -e '

map global user n ':new<ret>'

map global user v ':terminal nvim "+%val{cursor_line}" "%val{buffile}"<ret>'
